<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JamStudio Pro | JamVault</title>
    <link rel="stylesheet" href="IndexStyles_fixed.css">
    <style>
        /* Track Control Buttons */
        .arm-btn {
            background-color: #444;
            color: #999;
            border: 2px solid #666;
            padding: 0.4rem 0.8rem;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .arm-btn:hover {
            background-color: #555;
            border-color: #888;
        }

        .arm-btn.active {
            background-color: #dc3545;
            color: white;
            border-color: #c82333;
            box-shadow: 0 0 15px rgba(220, 53, 69, 0.7);
            animation: pulse-red 2s infinite;
        }

        @keyframes pulse-red {

            0%,
            100% {
                box-shadow: 0 0 10px rgba(220, 53, 69, 0.5);
            }

            50% {
                box-shadow: 0 0 20px rgba(220, 53, 69, 1);
            }
        }

        .monitor-btn {
            background-color: #444;
            color: #999;
            border: 2px solid #666;
            padding: 0.4rem 0.8rem;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .monitor-btn:hover {
            background-color: #555;
            border-color: #888;
        }

        .monitor-btn.active {
            background-color: #28a745;
            color: white;
            border-color: #218838;
            box-shadow: 0 0 15px rgba(40, 167, 69, 0.7);
        }

        .mute-btn,
        .solo-btn,
        .import-btn,
        .mixer-toggle-btn {
            background-color: #444;
            color: #999;
            border: 2px solid #666;
            padding: 0.4rem 0.8rem;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .mute-btn:hover,
        .solo-btn:hover,
        .import-btn:hover,
        .mixer-toggle-btn:hover {
            background-color: #555;
        }

        .mute-btn.active {
            background-color: #ffc107;
            color: #000;
            border-color: #e0a800;
        }

        .solo-btn.active {
            background-color: #17a2b8;
            color: white;
            border-color: #138496;
        }

        .track-controls {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-top: 0.5rem;
        }

        .recording-indicator {
            position: fixed;
            top: 80px;
            right: 20px;
            background-color: #dc3545;
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 6px;
            font-weight: bold;
            font-size: 1.2rem;
            z-index: 1000;
            animation: blink 1s infinite;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        .recording-indicator.hidden {
            display: none;
        }

        @keyframes blink {

            0%,
            50% {
                opacity: 1;
            }

            51%,
            100% {
                opacity: 0.4;
            }
        }

        .vu-meter {
            width: 20px;
            height: 100%;
            background-color: #222;
            border: 1px solid #444;
            border-radius: 2px;
            overflow: hidden;
            position: relative;
        }

        .vu-level {
            position: absolute;
            bottom: 0;
            width: 100%;
            background-color: #2ecc71;
            transition: height 0.1s ease;
        }

        .track-item {
            display: flex;
            gap: 0.5rem;
            padding: 0.5rem;
            background-color: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
            margin-bottom: 0.5rem;
        }

        .track-content {
            flex: 1;
        }

        .track-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .track-name {
            font-weight: bold;
            color: #fff;
        }

        .track-header-actions {
            display: flex;
            gap: 0.3rem;
        }

        .track-delete {
            background-color: #dc3545;
            color: white;
            border: none;
            padding: 0.2rem 0.5rem;
            border-radius: 3px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .track-delete:hover {
            background-color: #c82333;
        }

        .track-mixer {
            background-color: rgba(0, 0, 0, 0.5);
            padding: 0.8rem;
            border-radius: 4px;
            margin-top: 0.5rem;
        }

        .mixer-row {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .mixer-row label {
            min-width: 40px;
            color: #ccc;
        }

        .mixer-row input[type="range"] {
            flex: 1;
        }

        .mixer-row span {
            min-width: 50px;
            text-align: right;
            color: #fff;
        }

        .track-mixer button {
            margin-right: 0.3rem;
            margin-bottom: 0.3rem;
            padding: 0.3rem 0.6rem;
            background-color: #555;
            color: white;
            border: 1px solid #777;
            border-radius: 3px;
            cursor: pointer;
        }

        .track-mixer button:hover {
            background-color: #666;
        }

        .track-mixer h4 {
            color: #fff;
            margin-top: 0.8rem;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        /* Audio Device Selector */
        .audio-device-selector {
            display: flex;
            gap: 0.8rem;
            padding: 0.5rem 1rem;
            background: rgba(0, 0, 0, 0.3);
            border-left: 2px solid rgba(255, 255, 255, 0.1);
        }

        .device-row {
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .device-row label {
            font-size: 0.85rem;
            color: #ccc;
            min-width: 50px;
            cursor: help;
        }

        .device-select {
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: 1px solid #555;
            border-radius: 3px;
            padding: 0.3rem 0.5rem;
            font-size: 0.85rem;
            cursor: pointer;
            min-width: 150px;
        }

        .device-select:hover {
            border-color: #777;
            background: rgba(0, 0, 0, 0.7);
        }

        .device-select:focus {
            outline: none;
            border-color: #4a9eff;
        }
    </style>
    <style>
        .audio-device-selector {
            gap: 0.5rem !important;
            padding: 0.2rem 0.5rem !important
        }

        .device-row {
            gap: 0.2rem !important
        }

        .device-row label {
            font-size: 0.7rem !important;
            min-width: auto !important;
            margin-right: 2px !important
        }

        .device-select {
            padding: 0.1rem 0.2rem !important;
            font-size: 0.7rem !important;
            min-width: 80px !important;
            max-width: 120px !important;
            height: 22px !important
        }
    </style>
</head>

<body class="JamVault">
    <!-- ========== HEADER GLOBAL ========== -->
    <header>
        <a href="INDEX.html">
            <div class="logo-title">
                <img src="imagenes/logo.png" alt="Logo" class="Logo">
            </div>
        </a>
        <div class="nav-links">
            <a href="Acordes.html" class="btn">Acordes</a>
            <a href="Escalas.html" class="btn">Escalas</a>
            <a href="Tabs.html" class="btn">Tabs</a>
            <a href="Afinador.html" class="btn">Afinador</a>
            <a href="Jamstudio.html" class="btn">JamStudio</a>
            <a href="Songbook.html" class="btn">Canciones</a>
        </div>
        <button id="toggleTheme" class="btn">Cambiar Tema</button>
    </header>

    <!-- ========== DAW CONTROLS ========== -->
    <div class="daw-transport">
        <div class="transport-controls">
            <button id="recordBtn" class="btn record-btn" title="Grabar (R)">
                <span class="record-icon">‚óè</span> Grabar
            </button>
            <button id="playBtn" class="btn play-btn" title="Reproducir (Espacio)">‚ñ∂ Play</button>
            <button id="pauseBtn" class="btn pause-btn" title="Pausar (Espacio)" disabled>‚è∏ Pausa</button>
            <button id="stopBtn" class="btn stop-btn" title="Detener">‚èπ Stop</button>
        </div>

        <div class="time-display">
            <span id="currentTime">00:00.0</span>
            <span class="time-separator">/</span>
            <span id="totalTime">00:00.0</span>
        </div>

        <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <div class="tempo-controls">
            <label for="metronomeToggle">
                <input type="checkbox" id="metronomeToggle">
                Metr√≥nomo
            </label>
            <div class="bpm-input-group">
                <input type="number" id="bpmInput" class="bpm-input" min="40" max="240" value="120">
                <span class="bpm-label">BPM</span>
            </div>
        </div>

        <div class="master-controls">
            <label>Master Volume</label>
            <input type="range" id="masterVolume" min="0" max="100" value="80" class="master-fader">
            <span id="masterVolumeValue">80%</span>
        </div>

        <!-- Audio Device Selector -->
        <div class="audio-device-selector">
            <div class="device-row">
                <label title="Dispositivo de entrada (micr√≥fono/interfaz)">üé§ In:</label>
                <select id="audioInputDevice" class="device-select">
                    <option value="default">Default</option>
                </select>
            </div>
            <div class="device-row">
                <label title="Dispositivo de salida (altavoces/auriculares)">üîä Out:</label>
                <select id="audioOutputDevice" class="device-select">
                    <option value="default">Default</option>
                </select>
            </div>
        </div>
    </div>

    <!-- ========== MAIN DAW INTERFACE ========== -->
    <main class="daw-main">
        <!-- Track List (Left Panel) -->
        <aside class="track-list">
            <div class="track-list-header">
                <h3>Pistas</h3>
                <button id="addTrackBtn" class="btn add-track-btn">+ Nueva Pista</button>
            </div>
            <div id="trackListContainer" class="track-list-items">
                <!-- Tracks will be added dynamically -->
            </div>
            <div class="track-actions">
                <button id="clearAllBtn" class="btn clear-btn">Limpiar Todo</button>
                <button id="exportBtn" class="btn export-btn">üíæ Exportar</button>
            </div>
        </aside>

        <!-- Timeline (Center Panel) -->
        <section class="timeline-section">
            <div class="timeline-ruler" id="timelineRuler">
                <!-- Time markers will be generated dynamically -->
            </div>
            <div id="tracksContainer" class="tracks-container">
                <!-- Waveform tracks will be added dynamically -->
            </div>
            <div id="playhead" class="playhead"></div>
            <div id="recordingIndicator" class="recording-indicator hidden">‚óè REC</div>
        </section>
    </main>

    <!-- JamStudio Pro v2 - Clip-Based Timeline System -->
    <script type="module" src="Jamstudio.js"></script>
    <script src="LocalStorage.js"></script>
</body>

</html>